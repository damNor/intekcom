{preload_replace:template_group="mpanel"}
{preload_replace:template="pg-sales-chart"}


{preload_replace:pages-title-id="Kelola Laporan Penjualan"}
{preload_replace:pages-title-en="Manage Sales Report"}

{embed="indoteknik_com:{template_group}/_header" template_group="{template_group}" template="{template}"}

<!-- BEGIN GLOBAL MANDATORY STYLES -->
<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css">
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css">
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css">
<!-- END GLOBAL MANDATORY STYLES -->
<!-- BEGIN PAGE LEVEL STYLES -->
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" type="text/css"/>
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/admin/pages/css/invoice.css" rel="stylesheet" type="text/css"/>
<link rel="stylesheet" type="text/css" href="http://indoteknik.com/themes/site_themes/metronic/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css"/>
<!-- END PAGE LEVEL STYLES -->
<!-- BEGIN THEME STYLES -->
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/global/css/components-md.css" id="style_components" rel="stylesheet" type="text/css">
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/global/css/plugins-md.css" rel="stylesheet" type="text/css">
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/admin/layout3/css/layout.css" rel="stylesheet" type="text/css">
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/admin/layout3/css/themes/default.css" rel="stylesheet" type="text/css" id="style_color">
<link href="http://indoteknik.com/themes/site_themes/metronic/assets/admin/layout3/css/custom.css" rel="stylesheet" type="text/css">
<!-- END THEME STYLES -->

{_header_mpanel_end}
{!-- ---------------------------------------------------------------------------------------------------------- --}


<!-- BEGIN BODY -->
<!-- DOC: Apply "page-header-menu-fixed" class to set the mega menu fixed  -->
<!-- DOC: Apply "page-header-top-fixed" class to set the top menu fixed  -->
<body class="page-md">
<!-- BEGIN HEADER -->
<div class="page-header">

{header_mpanel}	

{if logged_out}
	{redirect="{template_group}/login"}
{if:else}

<!-- BEGIN PAGE CONTAINER -->
<div class="page-container">
	<!-- BEGIN PAGE HEAD -->
	<div class="page-head">
		<div class="container">
			<!-- BEGIN PAGE TITLE -->
			<div class="page-title">
				<h1>{pages-title-id} <small>{pages-title-en}</small></h1>
			</div>
			<!-- END PAGE TITLE -->
		</div>
	</div>
	<!-- END PAGE HEAD -->

	<!-- BEGIN PAGE CONTENT -->
	<div class="page-content">
		<div class="container">
		    <!-- BEGIN PAGE BREADCRUMB -->
			<ul class="page-breadcrumb breadcrumb">
				<li>
					<a href="{path="{segment_1}/mpanel/member"}">Beranda</a><i class="fa fa-circle"></i>
				</li>
				<li>
					<a href="{path="{segment_1}/mpanel/member"}">Admin Area</a>
					<i class="fa fa-circle"></i>
				</li>
				<li class="active">
					 {pages-title-id}
				</li>
			</ul>
			<!-- END PAGE BREADCRUMB -->

			<!-- BEGIN PAGE CONTENT INNER -->
			<div class="row margin-top-10">
				<div class="col-md-12">
					<div class="col-md-6">
						<!-- BEGIN PORTLET -->
						<div class="portlet light tasks-widget">
							<div class="portlet-title">
								<div class="caption caption-md">
									<i class="icon-bar-chart theme-font hide"></i>
									<span class="caption-subject font-blue-madison bold uppercase">Sales Report</span>
									<span class="caption-helper">2013</span>
								</div>
							</div>
							<div class="portlet-body">
								<div class="task-content">
									<div class="scroller" style="height:300px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#D7DCE2">
										<!-- START TASK LIST -->
                                        
                                        <div id="gchart_sales_report_2013"></div>
					 					<!-- <button id="b1" class="year-selector" value="2013">2013</button>
					 					<button id="b2" class="year-selector" value="2014">2014</button>
					 					<button id="b3" class="year-selector" value="2015">2015</button> -->

										<!-- END START TASK LIST -->
									</div>
								</div>
							</div>
						</div>
						<!-- END PORTLET -->
					</div>
					<div class="col-md-6">
						<!-- BEGIN PORTLET -->
						<div class="portlet light tasks-widget">
							<div class="portlet-title">
								<div class="caption caption-md">
									<i class="icon-bar-chart theme-font hide"></i>
									<span class="caption-subject font-blue-madison bold uppercase">Sales Report</span>
									<span class="caption-helper">2014</span>
								</div>
							</div>
							<div class="portlet-body">
								<div class="task-content">
									<div class="scroller" style="height:300px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#D7DCE2">
										<!-- START TASK LIST -->
                                        <div id="gchart_sales_report_2014"></div>
										<!-- END START TASK LIST -->
									</div>
								</div>
							</div>
						</div>
						<!-- END PORTLET -->
					</div>
					<div class="col-md-6">
						<!-- BEGIN PORTLET -->
						<div class="portlet light tasks-widget">
							<div class="portlet-title">
								<div class="caption caption-md">
									<i class="icon-bar-chart theme-font hide"></i>
									<span class="caption-subject font-blue-madison bold uppercase">Sales Report</span>
									<span class="caption-helper">2015</span>
								</div>
							</div>
							<div class="portlet-body">
								<div class="task-content">
									<div class="scroller" style="height:300px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#D7DCE2">
										<!-- START TASK LIST -->
                                        <div id="gchart_sales_report_2015"></div>
										<!-- END START TASK LIST -->
									</div>
								</div>
							</div>
						</div>
						<!-- END PORTLET -->
					</div>
				</div>
			</div>

				<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
			<div class="modal fade" id="modal-sales-detail" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
							<h4 class="modal-title">Detail Sales By Category</h4>
						</div>
						<div class="modal-body">
							 <div id="gchart_sales_report_detail" class="center-block" style="width:450px; height:450px;"></div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn default" data-dismiss="modal">Close</button>
						</div>
					</div>
					<!-- /.modal-content -->
				</div>
				<!-- /.modal-dialog -->
			</div>
			<!-- END PAGE CONTENT INNER -->
		</div>
	</div>
	<!-- END PAGE CONTENT -->
</div>
<!-- END PAGE CONTAINER -->

{/if} {!-- END OF IF LOGOUT--}

{footer_mpanel}

{!-- ---------------------------------------------------------------------------------------------------------- --}

{js_mpanel} 

<script>
jQuery(document).ready(function() {       
   	// initiate layout and plugins
   Metronic.init(); // init metronic core components
   Layout.init(); // init current layout
   Demo.init(); // init demo features\
   Profile.init(); // init page demo
   //TableManaged.init();  
});// end of document ready
</script>
<!-- <script src="//www.google.com/jsapi" type="text/javascript"></script> -->
 <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
google.charts.load('current', {packages: ['corechart', 'bar']});
google.charts.setOnLoadCallback(drawChart2013);
google.charts.setOnLoadCallback(drawChart2014);
google.charts.setOnLoadCallback(drawChart2015);

function drawChart2013() 
{
	var jsonData = $.ajax({
						    url: "http://indoteknik.com/mpanel_embed/data-sales-report/2036",
						    dataType: "json",
						    async: false
						  }).responseText;

    // Create our data table out of JSON data loaded from server.
  	var data = new google.visualization.DataTable(jsonData);

	// Instantiate and draw our chart, passing in some options.
	var chart = new google.visualization.ColumnChart(document.getElementById('gchart_sales_report_2013'));
	var entry_id = '';
	function selectHandler(){
	  	var selectedItem = chart.getSelection()[0];
	   
	  	if(selectedItem){

	  		console.log( data.getValue(selectedItem.column, 0) + " - "+ data.getValue(selectedItem.column, 1) );
	  		entry_id = data.getValue(selectedItem.row,0);
	  		$('#modal-sales-detail').modal('show');
	  	}
  	}

   	$('#modal-sales-detail').on('shown.bs.modal',function(){

  		var jsonData = $.ajax({
							    url: "http://indoteknik.com/mpanel_embed/data-sales-report-detail/"+entry_id,
							    dataType: "json",
							    async: false
							  }).responseText;

  		 var chartData = new google.visualization.DataTable(jsonData);
            var wrapper = new google.visualization.ChartWrapper({
                chartType: 'PieChart',
                dataTable: chartData,
                options: {
                    title: 'Detail Sales per category',
                    is3D: true,
                    pieSliceText: 'label',
                    legend: 'none',
                    width:450,
                    height:450,
                },
                containerId: 'gchart_sales_report_detail'
            });
            wrapper.draw();
            google.visualization.events.addListener(wrapper, 'select', function(){
                var s = wrapper.getChart().getSelection();
                wrapper.getChart().setSelection();
                if(s.length >= 1) {
                    console.log(wrapper.getDataTable().getValue(s[0].row, 0)); //defined in reports/index.js
                }
            });
 	});

    google.visualization.events.addListener(chart,'select',selectHandler);
    chart.draw(data, {
    					width: 600, 
    					height: 360,
    					bar: {groupWidth: "95%"},
        				legend: { position: "none" }, 
        				animation:{
					        duration: 1000,
					        easing: 'out',
					      },
    					title: 'Annual Sales Report',
                          vAxis: {
                          			title: 'Value in IDR', 
                          			titleTextStyle: {color: 'red'}
                          		}, 
                          hAxis: {
                          			title: 'Month', 
                          			titleTextStyle: {color: 'red'}
                          		}
                           });

   
}// end drawChart2013 function

// draw chart 2014
function drawChart2014() 
{
	var jsonData = $.ajax({
						    url: "http://indoteknik.com/mpanel_embed/data-sales-report/2037",
						    dataType: "json",
						    async: false
						  }).responseText;

    // Create our data table out of JSON data loaded from server.
  	var data = new google.visualization.DataTable(jsonData);

	// Instantiate and draw our chart, passing in some options.
	var chart = new google.visualization.ColumnChart(document.getElementById('gchart_sales_report_2014'));
	var entry_id = '';
	function selectHandler(){
	  	var selectedItem = chart.getSelection()[0];
	   
	  	if(selectedItem){

	  		console.log( data.getValue(selectedItem.column, 0) + " - "+ data.getValue(selectedItem.column, 1) );
	  		entry_id = data.getValue(selectedItem.row,0);
	  		$('#modal-sales-detail').modal('show');
	  	}
  	}

   	$('#modal-sales-detail').on('shown.bs.modal',function(){

  		var jsonData = $.ajax({
							    url: "http://indoteknik.com/mpanel_embed/data-sales-report-detail/"+entry_id,
							    dataType: "json",
							    async: false
							  }).responseText;

  		 var chartData = new google.visualization.DataTable(jsonData);
            var wrapper = new google.visualization.ChartWrapper({
                chartType: 'PieChart',
                dataTable: chartData,
                options: {
                    title: 'Detail Sales per category',
                    is3D: true,
                    pieSliceText: 'label',
                    legend: 'none',
                    width:450,
                    height:450,
                },
                containerId: 'gchart_sales_report_detail'
            });
            wrapper.draw();
            google.visualization.events.addListener(wrapper, 'select', function(){
                var s = wrapper.getChart().getSelection();
                wrapper.getChart().setSelection();
                if(s.length >= 1) {
                    console.log(wrapper.getDataTable().getValue(s[0].row, 0)); //defined in reports/index.js
                }
            });
 	});

    google.visualization.events.addListener(chart,'select',selectHandler);
    chart.draw(data, {
    					width: 600, 
    					height: 360,
    					bar: {groupWidth: "95%"},
        				legend: { position: "none" }, 
        				animation:{
					        duration: 1000,
					        easing: 'out',
					      },
    					title: 'Annual Sales Report',
                          vAxis: {
                          			title: 'Value in IDR', 
                          			titleTextStyle: {color: 'red'}
                          		}, 
                          hAxis: {
                          			title: 'Month', 
                          			titleTextStyle: {color: 'red'}
                          		}
                           });

   
}// end drawChart2014 function

// draw chart 2015
function drawChart2015() 
{
	var jsonData = $.ajax({
						    url: "http://indoteknik.com/mpanel_embed/data-sales-report/2038",
						    dataType: "json",
						    async: false
						  }).responseText;

    // Create our data table out of JSON data loaded from server.
  	var data = new google.visualization.DataTable(jsonData);

	// Instantiate and draw our chart, passing in some options.
	var chart = new google.visualization.ColumnChart(document.getElementById('gchart_sales_report_2015'));
	var entry_id = '';
	function selectHandler(){
	  	var selectedItem = chart.getSelection()[0];
	   
	  	if(selectedItem){

	  		console.log( data.getValue(selectedItem.column, 0) + " - "+ data.getValue(selectedItem.column, 1) );
	  		entry_id = data.getValue(selectedItem.row,0);
	  		$('#modal-sales-detail').modal('show');
	  	}
  	}

   	$('#modal-sales-detail').on('shown.bs.modal',function(){

  		var jsonData = $.ajax({
							    url: "http://indoteknik.com/mpanel_embed/data-sales-report-detail/"+entry_id,
							    dataType: "json",
							    async: false
							  }).responseText;

  		 var chartData = new google.visualization.DataTable(jsonData);
            var wrapper = new google.visualization.ChartWrapper({
                chartType: 'PieChart',
                dataTable: chartData,
                options: {
                    title: 'Detail Sales per category',
                    is3D: true,
                    pieSliceText: 'label',
                    legend: 'none',
                    width:450,
                    height:450,
                },
                containerId: 'gchart_sales_report_detail'
            });
            wrapper.draw();
            google.visualization.events.addListener(wrapper, 'select', function(){
                var s = wrapper.getChart().getSelection();
                wrapper.getChart().setSelection();
                if(s.length >= 1) {
                    console.log(wrapper.getDataTable().getValue(s[0].row, 0)); //defined in reports/index.js
                }
            });
 	});

    google.visualization.events.addListener(chart,'select',selectHandler);
    chart.draw(data, {
    					width: 600, 
    					height: 360,
    					bar: {groupWidth: "95%"},
        				legend: { position: "none" }, 
        				animation:{
					        duration: 1000,
					        easing: 'out',
					      },
    					title: 'Annual Sales Report',
                          vAxis: {
                          			title: 'Value in IDR', 
                          			titleTextStyle: {color: 'red'}
                          		}, 
                          hAxis: {
                          			title: 'Month', 
                          			titleTextStyle: {color: 'red'}
                          		}
                           });

   
}// end drawChart2014 function
</script>
<!-- END JAVASCRIPTS -->

</body>

<!-- END BODY -->
</html>